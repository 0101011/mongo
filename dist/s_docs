#! /bin/sh

# We require doxygen which may not be installed.
type doxygen > /dev/null 2>&1 || {
	echo 'doxygen not found, skipping document creation'
	return 1
}

filter=
while :
	do case "$1" in
	-b)     # Include the Berkeley DB cross-reference
		filter="| sed 's,src/bdb-map.dox,,'"
		shift;;
	*)
		break;;
	esac
done

# Run doxygen to generate HTML documentation.
cd ../docs && (eval cat Doxyfile $filter ; echo "QUIET=YES") | doxygen -
