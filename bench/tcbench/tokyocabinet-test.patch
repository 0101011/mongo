--- bros/Makefile	2009-01-26 13:44:10.000000000 +1100
+++ bros/Makefile	2011-09-12 14:40:51.012340635 +1000
@@ -11,8 +11,8 @@
 SHELL = /bin/sh
 
 # Targets
-MYBINS = tctest qdbmtest ndbmtest sdbmtest gdbmtest tdbtest cdbtest bdbtest \
-  maptest sqltest cmpsqltctest
+MYBINS = tctest qdbmtest ndbmtest sdbmtest gdbmtest tdbtest cdbtest \
+  bdbtest wttest maptest sqltest cmpsqltctest
 
 
 
@@ -64,7 +64,7 @@
 qdbmtest : qdbmtest.c
 	gcc -I.. -I/usr/local/include -D_GNU_SOURCE=1 \
 	  -Wall -ansi -pedantic -O3 -o $@ qdbmtest.c \
-	  -static -L.. -L/usr/local/lib -lqdbm -lz -lc
+	  -static -L.. -L/usr/local/lib -lqdbm -liconv -lz -lc
 
 
 ndbmtest : ndbmtest.c
@@ -98,9 +98,15 @@
 
 
 bdbtest : bdbtest.c
-	gcc -I/usr/local/bdb/include -D_GNU_SOURCE=1 \
+	gcc -I/usr/local/include/db5 -D_GNU_SOURCE=1 \
 	  -Wall -O3 -o $@ bdbtest.c \
-	  -static -L/usr/local/bdb/lib -ldb -lpthread -lc
+	  -static -L/usr/local/lib/db5 -ldb -lpthread -lc
+
+WT_HOME=/home/mjc/wt/src/wiredtiger
+wttest : wttest.c
+	gcc -I$(WT_HOME)/build_posix -D_GNU_SOURCE=1 \
+	  -Wall -O3 -o $@ wttest.c \
+	  $(WT_HOME)/build_posix/.libs/libwiredtiger.a -lpthread -lc
 
 
 maptest : maptest.cc
--- bros/reporter	2008-07-27 22:30:39.000000000 +1000
+++ bros/reporter	2011-08-05 17:20:26.500784436 +1000
@@ -11,9 +11,9 @@
 
 use constant {
     RECNUM => 1000000,
-    TESTCOUNT => 20,
+    TESTCOUNT => 7,
     REMOVETOP => 2,
-    REMOVEBOTTOM => 8,
+    REMOVEBOTTOM => 2,
 };
 
 my @commands = (
@@ -47,6 +47,27 @@
                 './bdbtest btread -rnd casket.bdbb_r ' . RECNUM,
                 './tctest flwrite casket.tcf ' . RECNUM,
                 './tctest flread casket.tcf ' . RECNUM,
+
+                './wttest write -bulk file:casket.wt_b ' . RECNUM,
+                './wttest read file:casket.wt_b ' . RECNUM,
+                './wttest write file:casket.wt_a ' . RECNUM,
+                './wttest read file:casket.wt_a ' . RECNUM,
+		'./wttest write -rnd file:casket.wt_r ' . RECNUM,
+                './wttest read -rnd file:casket.wt_r ' . RECNUM,
+
+                './wttest vlcswrite -bulk file:casket.vlwt_b ' . RECNUM,
+                './wttest vlcsread file:casket.vlwt_b ' . RECNUM,
+                './wttest vlcswrite file:casket.vlwt_a ' . RECNUM,
+                './wttest vlcsread file:casket.vlwt_a ' . RECNUM,
+                './wttest vlcswrite -rnd file:casket.vlwt_r ' . RECNUM,
+                './wttest vlcsread -rnd file:casket.vlwt_r ' . RECNUM,
+
+                './wttest flcswrite file:casket.flwt_b ' . RECNUM,
+                './wttest flcsread file:casket.flwt_b ' . RECNUM,
+                './wttest flcswrite file:casket.flwt_a ' . RECNUM,
+                './wttest flcsread file:casket.flwt_a ' . RECNUM,
+                './wttest flcswrite -rnd file:casket.flwt_r ' . RECNUM,
+                './wttest flcsread -rnd file:casket.flwt_r ' . RECNUM,
                 );
 
 my @names = (
@@ -65,6 +86,15 @@
              'casket.bdbb',
              'casket.bdbb_r',
              'casket.tcf',
+             'casket.wt_b',
+             'casket.wt_a',
+             'casket.wt_r',
+             'casket.vlwt_b',
+             'casket.vlwt_a',
+             'casket.vlwt_r',
+             'casket.flwt_b',
+             'casket.flwt_a',
+             'casket.flwt_r',
              );
 
 foreach my $name (@names){
@@ -120,22 +150,36 @@
 }
 printf("\n");
 
-printf("%s,%.5f,%.5f,%d\n", "TC", $table[0][1], $table[1][1], $sizes[0]);
-printf("%s,%.5f,%.5f,%d\n", "QDBM", $table[2][1], $table[3][1], $sizes[1]);
-printf("%s,%.5f,%.5f,%d\n", "NDBM", $table[4][1], $table[5][1], $sizes[2]);
-printf("%s,%.5f,%.5f,%d\n", "SDBM", $table[6][1], $table[7][1], $sizes[3]);
-printf("%s,%.5f,%.5f,%d\n", "GDBM", $table[8][1], $table[9][1], $sizes[4]);
-printf("%s,%.5f,%.5f,%d\n", "TDB", $table[10][1], $table[11][1], $sizes[5]);
-printf("%s,%.5f,%.5f,%d\n", "CDB", $table[12][1], $table[13][1], $sizes[6]);
-printf("%s,%.5f,%.5f,%d\n", "BDB", $table[14][1], $table[15][1], $sizes[7]);
+printf("%s,%.5f,%.5f,%d\n", "TC-HASH", $table[0][1], $table[1][1], $sizes[0]);
+printf("%s,%.5f,%.5f,%d\n", "QDBM-HASH", $table[2][1], $table[3][1], $sizes[1]);
+#printf("%s,%.5f,%.5f,%d\n", "NDBM", $table[4][1], $table[5][1], $sizes[2]);
+#printf("%s,%.5f,%.5f,%d\n", "SDBM", $table[6][1], $table[7][1], $sizes[3]);
+#printf("%s,%.5f,%.5f,%d\n", "GDBM", $table[8][1], $table[9][1], $sizes[4]);
+#printf("%s,%.5f,%.5f,%d\n", "TDB", $table[10][1], $table[11][1], $sizes[5]);
+#printf("%s,%.5f,%.5f,%d\n", "CDB", $table[12][1], $table[13][1], $sizes[6]);
+printf("%s,%.5f,%.5f,%d\n", "BDB-HASH", $table[14][1], $table[15][1], $sizes[7]);
+
+# Ordered trees, in-order writes
 printf("%s,%.5f,%.5f,%d\n", "TC-BT-ASC", $table[16][1], $table[17][1], $sizes[8]);
-printf("%s,%.5f,%.5f,%d\n", "TC-BT-RND", $table[18][1], $table[19][1], $sizes[9]);
 printf("%s,%.5f,%.5f,%d\n", "QDBM-BT-ASC", $table[20][1], $table[21][1], $sizes[10]);
-printf("%s,%.5f,%.5f,%d\n", "QDBM-BT-RND", $table[22][1], $table[23][1], $sizes[11]);
 printf("%s,%.5f,%.5f,%d\n", "BDB-BT-ASC", $table[24][1], $table[25][1], $sizes[12]);
-printf("%s,%.5f,%.5f,%d\n", "BDB-BT-RND", $table[26][1], $table[27][1], $sizes[13]);
-printf("%s,%.5f,%.5f,%d\n", "TC-FIXED", $table[28][1], $table[29][1], $sizes[14]);
+printf("%s,%.5f,%.5f,%d\n", "WT-BT-BULK", $table[30][1], $table[31][1], $sizes[15]);
+printf("%s,%.5f,%.5f,%d\n", "WT-BT-ASC", $table[32][1], $table[33][1], $sizes[16]);
 
+# Ordered trees, random writes
+printf("%s,%.5f,%.5f,%d\n", "TC-BT-RND", $table[18][1], $table[19][1], $sizes[9]);
+printf("%s,%.5f,%.5f,%d\n", "QDBM-BT-RND", $table[22][1], $table[23][1], $sizes[11]);
+printf("%s,%.5f,%.5f,%d\n", "BDB-BT-RND", $table[26][1], $table[27][1], $sizes[13]);
+printf("%s,%.5f,%.5f,%d\n", "WT-BT-RND", $table[34][1], $table[35][1], $sizes[17]);
 
+# Fixed-size / column stores
+printf("%s,%.5f,%.5f,%d\n", "TC-FIXED", $table[28][1], $table[29][1], $sizes[14]);
+printf("%s,%.5f,%.5f,%d\n", "WT-VAR-BULK", $table[36][1], $table[37][1], $sizes[18]);
+printf("%s,%.5f,%.5f,%d\n", "WT-VAR", $table[38][1], $table[39][1], $sizes[19]);
+printf("%s,%.5f,%.5f,%d\n", "WT-VAR-RND", $table[40][1], $table[41][1], $sizes[20]);
+
+printf("%s,%.5f,%.5f,%d\n", "WT-FIX-BULK", $table[42][1], $table[43][1], $sizes[21]);
+printf("%s,%.5f,%.5f,%d\n", "WT-FIX", $table[44][1], $table[45][1], $sizes[22]);
+printf("%s,%.5f,%.5f,%d\n", "WT-FIX-RND", $table[46][1], $table[47][1], $sizes[23]);
 
 # END OF FILE
