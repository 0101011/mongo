#! /bin/sh

# Complain about unused #typedefs.
t=__wt.$$
trap 'rm -f $t; exit 0' 0 1 2 3 13 15

# List of files to search.
l=`sed -e 's,#.*,,' -e '/^$/d' -e 's,^,../,' filelist`
l="$l `echo ../src/utilities/*.c`"

(
# Get the list of typedefs
search=`cat ../src/include/*.h ../src/include/*.in |
    sed -e 's/^struct.*typedef.* \(.*\);$/\1/p' -e d |
    sort -u`
echo "$search"
fgrep -who "$search" $l
) | sort | uniq -u > $t

test -s $t && cat $t

exit 0
