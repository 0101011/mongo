#! /bin/sh
#
# Copyright (c) 2008-2011 WiredTiger, Inc.
#	All rights reserved.

# Build Makefile.am
filelist=../dist/filelist
set_sources()
{
	echo
	echo "libwiredtiger_a_SOURCES=\\"
	sed -e '/^[a-z]/! d' \
	    -e 's/.*/	..\/& \\/' \
	    -e '$s/ \\$//' < $filelist
}

set_vpath()
{
	echo
	printf "VPATH = ../examples/c:"
	sed -e '/^[a-z]/! d' \
	    -e 's/\(.*\)\/.*/\1/' < $filelist |
	sort -u |
	while read d ; do printf "../%s:" $d ; done
	echo "../src/utilities"
}

(cat Make.base; set_vpath; set_sources) > Makefile.am
